# Google Map Exporter

Google Mapsから店舗情報を取得してCSVファイルに出力するツールです。

## 機能

- キーワード検索（場所 + 業種を一括入力）
- 豊富なフィルタリング機能：
  - 評価（数値指定）
  - レビュー数（数値指定）
  - カテゴリ（部分一致）
  - 予算（範囲指定）
  - 営業曜日（複数選択可）
  - 営業時間（指定時刻に営業中の店舗を抽出）
- 結果をWebページでプレビュー＆CSVダウンロード

## クイックスタート

### 方法1: バッチファイルを使う（推奨）

1. **`セットアップ.bat`** をダブルクリック（初回のみ）
2. **`起動.bat`** をダブルクリック
3. ブラウザが自動で開きます

### 方法2: コマンドラインを使う

```bash
# インストール
npm install

# 起動
npm start
```

## 使用方法

### 1. 検索キーワードを入力

検索キーワード欄に **場所 + 検索ワード** を入力します。

**入力例:**
- `東京都 渋谷区 ラーメン`
- `大阪府 梅田 カフェ`
- `新宿駅 居酒屋`
- `横浜市 イタリアン`

### 2. 絞り込み条件を設定（任意）

| 項目 | 説明 | 例 |
|------|------|-----|
| 評価 | この評価以上の店舗のみ | 3.5 |
| レビュー数 | このレビュー数以上の店舗のみ | 50 |
| 予算下限/上限 | 価格帯でフィルタリング | 1000〜3000 |
| 住所 | 住所に含まれるキーワード | 渋谷 |
| カテゴリ | カテゴリに含まれるキーワード | カフェ |
| 営業曜日 | 特定の曜日に営業している店舗 | 土、日 |
| 営業時間 | 指定時間に営業している店舗 | 22:00 |

### 3. 検索開始

「検索開始」ボタンをクリックすると処理が開始されます。

### 4. 結果の確認・ダウンロード

- 結果がテーブルに表示されます
- 「CSVダウンロード」ボタンでファイルを保存

## 出力CSV項目

| カラム名 | 内容 |
|---------|------|
| 店名 | 店舗の名前 |
| カテゴリ | 業種（カフェ、ラーメンなど） |
| 評価 | Google Mapsの評価（1.0〜5.0） |
| 評価件数 | レビューの件数 |
| 予算 | 価格帯（￥1,000〜2,000 など） |
| 営業時間 | 曜日ごとの営業時間 |
| 住所 | 店舗の住所 |
| 口コミ | ユーザーの口コミ（★評価付き） |
| URL | Google Mapsのリンク |

## ポータブル版

Node.jsがインストールされていない環境でも使用できるポータブル版を作成できます。

1. **`ポータブル版作成.bat`** をダブルクリック
2. 「ポータブル版」フォルダが作成されます
3. フォルダごとZIP圧縮して配布可能

## コマンドライン版（CLI）

```bash
node index.js --address "新宿駅" --keyword "ラーメン" --rating 4.0 --count 50 --output result.csv
```

| オプション | 説明 | デフォルト |
|-----------|------|-----------|
| `-a, --address` | 検索の中心地点（必須） | - |
| `-k, --keyword` | 検索キーワード（必須） | - |
| `-r, --rating` | 最低評価 | 0 |
| `-c, --count` | 最低レビュー数 | 0 |
| `-o, --output` | 出力ファイル名 | output.csv |

## 技術スタック

- **Node.js**: JavaScriptランタイム
- **Playwright**: ブラウザ自動化
- **Express.js**: Webサーバー
- **Socket.IO**: リアルタイム通信

## 注意事項

- Google MapsのUIは頻繁に変更されるため、動作しなくなる可能性があります
- 過度な使用はIPブロックやCAPTCHA認証を引き起こす可能性があります
- **個人的な利用にとどめてください**

## トラブルシューティング

### 検索結果が0件
- 絞り込み条件を緩くしてみてください
- キーワードを変えてみてください

### CSVが文字化けする
Excelで開く場合は、「データ」→「テキストファイルから」でUTF-8を指定してインポートしてください。
